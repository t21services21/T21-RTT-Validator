# ðŸ“Š NOTIFICATION DECISION MATRIX - WHEN TO USE WHAT

**The Complete Guide to Notifications, Pop-Ups, and Emails**

---

## ðŸŽ¯ **THE GOLDEN RULES**

### **Rule 1: Urgency Levels**
- ðŸ”´ **CRITICAL (4):** Pop-up + Email + In-app
- ðŸŸ  **HIGH (3):** Email + In-app + Pop-up (optional)
- ðŸŸ¡ **MEDIUM (2):** Email + In-app
- ðŸŸ¢ **LOW (1):** In-app only

### **Rule 2: User Impact**
- **Requires immediate action** â†’ Pop-up
- **Important but can wait** â†’ Email + In-app
- **FYI only** â†’ In-app only

### **Rule 3: Event Type**
- **User-initiated** (they did something) â†’ In-app + Email confirmation
- **System-initiated** (something happened) â†’ Email + In-app
- **Urgent alert** (needs immediate action) â†’ Pop-up + Email + In-app

---

## ðŸ“‹ **COMPLETE NOTIFICATION TABLE**

| Event | Urgency | Pop-Up | Email | In-App | Why |
|-------|---------|--------|-------|--------|-----|
| **RTT BREACH ALERT (<14 days)** | ðŸ”´ CRITICAL | âœ… YES (RED) | âœ… YES | âœ… YES | Immediate action needed! |
| **RTT BREACH ALERT (14-28 days)** | ðŸŸ  HIGH | âŒ NO | âœ… YES | âœ… YES | Important but not immediate |
| **2WW Cancer Referral** | ðŸ”´ CRITICAL | âœ… YES (RED) | âœ… YES | âœ… YES | 14-day deadline critical |
| **Patient Added to PBL** | ðŸŸ¡ MEDIUM | âŒ NO | âœ… YES | âœ… YES | Patient expects email |
| **Patient Added to PTL** | ðŸŸ¡ MEDIUM | âŒ NO | âœ… YES | âœ… YES | Patient expects email |
| **Appointment Booked** | ðŸŸ¡ MEDIUM | âŒ NO | âœ… YES | âœ… YES | Confirmation needed |
| **Appointment Cancelled** | ðŸŸ  HIGH | âŒ NO | âœ… YES | âœ… YES | Patient needs to know ASAP |
| **MDT Meeting Scheduled** | ðŸŸ¡ MEDIUM | âŒ NO | âœ… YES | âœ… YES | Attendees need to plan |
| **Referral Received** | ðŸŸ¡ MEDIUM | âŒ NO | âœ… YES | âœ… YES | Patient acknowledgment |
| **Clinical Letter Generated** | ðŸŸ¢ LOW | âŒ NO | âŒ NO | âœ… YES | FYI for staff |
| **Tier Upgrade Requested** | ðŸŸ  HIGH | âœ… YES (for admin) | âœ… YES | âœ… YES | Admin needs to act |
| **Tier Upgrade APPROVED** | ðŸŸ  HIGH | âœ… YES (GREEN) | âœ… YES | âœ… YES | Student should celebrate! |
| **Tier Upgrade REJECTED** | ðŸŸ¡ MEDIUM | âŒ NO | âœ… YES | âœ… YES | Disappointing but not urgent |
| **New Message Received** | ðŸŸ¡ MEDIUM | âŒ NO | âœ… YES | âœ… YES | User checks messages regularly |
| **New Message (URGENT)** | ðŸŸ  HIGH | âœ… YES (ORANGE) | âœ… YES | âœ… YES | Marked as urgent by sender |
| **Staff Account Created** | ðŸŸ¡ MEDIUM | âŒ NO | âœ… YES | âœ… YES | Welcome email important |
| **Password Reset Request** | ðŸŸ  HIGH | âŒ NO | âœ… YES | âœ… YES | Security - email essential |
| **Login from New Device** | ðŸŸ  HIGH | âŒ NO | âœ… YES | âœ… YES | Security alert |
| **Module Access Granted** | ðŸŸ¡ MEDIUM | âœ… YES (GREEN) | âœ… YES | âœ… YES | User should know immediately |
| **Payment Received** | ðŸŸ  HIGH | âœ… YES (GREEN) | âœ… YES | âœ… YES | Confirmation important |
| **Certificate Issued** | ðŸŸ  HIGH | âœ… YES (GREEN) | âœ… YES | âœ… YES | Achievement! |
| **Course Completed** | ðŸŸ¡ MEDIUM | âŒ NO | âœ… YES | âœ… YES | Progress update |
| **Assignment Due Soon** | ðŸŸ  HIGH | âœ… YES (ORANGE) | âœ… YES | âœ… YES | Reminder needed |
| **System Maintenance** | ðŸŸ  HIGH | âœ… YES (ORANGE) | âœ… YES | âœ… YES | Users need to know |
| **Welcome New User** | ðŸŸ¡ MEDIUM | âŒ NO | âœ… YES | âœ… YES | Onboarding email |
| **Trial Expiring (1 day)** | ðŸ”´ CRITICAL | âœ… YES (RED) | âœ… YES | âœ… YES | Last chance! |
| **Trial Expiring (7 days)** | ðŸŸ  HIGH | âŒ NO | âœ… YES | âœ… YES | Warning needed |
| **Data Breach Alert** | ðŸ”´ CRITICAL | âœ… YES (RED) | âœ… YES | âœ… YES | Security critical |
| **Support Ticket Reply** | ðŸŸ¡ MEDIUM | âŒ NO | âœ… YES | âœ… YES | User expects response |

---

## ðŸš¨ **POP-UP NOTIFICATION RULES**

### **âœ… USE POP-UP WHEN:**

1. **Immediate Action Required**
   - RTT breach <14 days
   - 2WW cancer referral
   - Trial expiring in 1 day
   - Payment failed
   - Data breach

2. **Good News (Celebrate!)**
   - Tier upgrade approved
   - Certificate issued
   - Payment received
   - Module access granted

3. **Admin Alerts**
   - New tier upgrade request
   - New staff account request
   - System error

4. **Urgent Messages**
   - Message marked "urgent" by sender
   - Teacher needs immediate response
   - Admin announcement

5. **Security Alerts**
   - Unusual login activity
   - Password changed
   - 2FA code required

### **âŒ DON'T USE POP-UP WHEN:**

1. **Routine Updates**
   - Course progress
   - Regular messages
   - General notifications

2. **FYI Information**
   - Clinical letter generated
   - Report available
   - System updates

3. **Low Priority**
   - Newsletter
   - Tips and tricks
   - Feature announcements

---

## ðŸ“§ **EMAIL NOTIFICATION RULES**

### **âœ… ALWAYS SEND EMAIL FOR:**

1. **Patient Communications**
   - Appointment confirmations
   - Appointment cancellations
   - Referral acknowledgments
   - PBL acknowledgments
   - Any clinical communication

2. **Account & Security**
   - Welcome emails
   - Password resets
   - Login alerts
   - Account changes
   - Payment receipts

3. **Approvals & Requests**
   - Request submitted
   - Request approved
   - Request rejected
   - Any status change

4. **Messages**
   - New message received
   - Reply received
   - Message from admin

5. **Important Updates**
   - Certificate issued
   - Course completed
   - Trial expiring
   - Payment due

### **âŒ DON'T SEND EMAIL FOR:**

1. **Very Low Priority**
   - Login success (unless suspicious)
   - Page viewed
   - Button clicked
   - Session started

2. **Too Frequent**
   - Every notification (would overwhelm inbox)
   - Real-time chat messages (unless first message)

3. **User Preference Off**
   - User disabled email notifications
   - Respect their choice!

---

## ðŸ”” **IN-APP NOTIFICATION RULES**

### **âœ… ALWAYS SHOW IN-APP FOR:**

**EVERYTHING!** 

Every event gets an in-app notification. Why?
- Shows in notification center
- Keeps history
- Doesn't overwhelm email
- Users can review anytime
- Badge shows unread count

### **Priority Levels:**

**ðŸ”´ URGENT (4):**
- RTT breach <14 days
- 2WW cancer referral
- Critical security alerts
- Payment failed
- Data breach

**ðŸŸ  HIGH (3):**
- RTT breach 14-28 days
- Tier upgrade requests
- Tier upgrade approved
- Appointment cancelled
- Urgent messages

**ðŸŸ¡ MEDIUM (2):**
- Patient added to PTL/PBL
- Appointment booked
- Referral received
- MDT meeting scheduled
- Regular messages
- Module access requests

**ðŸŸ¢ LOW (1):**
- Course progress
- Tips and tricks
- Clinical letter generated
- Reports available
- General updates

---

## ðŸŽ¨ **POP-UP COLOR CODING**

### **ðŸ”´ RED (CRITICAL - Requires Immediate Action):**
```
Examples:
- ðŸš¨ RTT BREACH ALERT! Patient Smith - 10 days to breach
- ðŸš¨ 2WW CANCER REFERRAL! Must book within 14 days
- ðŸš¨ TRIAL EXPIRES TOMORROW! Upgrade now
- ðŸš¨ DATA BREACH DETECTED! Action required
```

### **ðŸŸ  ORANGE (WARNING - Important):**
```
Examples:
- âš ï¸ Assignment Due Tomorrow! Submit by 5pm
- âš ï¸ RTT Breach Risk - 21 days remaining
- âš ï¸ System Maintenance in 1 hour
- âš ï¸ Payment Due Soon
```

### **ðŸŸ¢ GREEN (SUCCESS - Good News!):**
```
Examples:
- âœ… Tier Upgrade Approved! You now have Tier 2
- âœ… Certificate Issued! Congratulations
- âœ… Payment Received - Thank you
- âœ… Module Access Granted
```

### **ðŸ”µ BLUE (INFO - FYI):**
```
Examples:
- â„¹ï¸ New Feature Available
- â„¹ï¸ Course Updated
- â„¹ï¸ Report Ready to Download
```

---

## ðŸŽ¯ **DECISION FLOWCHART**

```
EVENT HAPPENS
    â†“
Is it CRITICAL? (Safety/Security/Deadline <14 days)
    â†“ YES â†’ Pop-up (RED) + Email + In-app
    â†“ NO
    â†“
Is it HIGH priority? (User needs to know soon)
    â†“ YES â†’ Email + In-app + Pop-up (if good news)
    â†“ NO
    â†“
Is it MEDIUM priority? (User should know)
    â†“ YES â†’ Email + In-app
    â†“ NO
    â†“
Is it LOW priority? (FYI)
    â†“ YES â†’ In-app only
    â†“
DONE
```

---

## ðŸ“Š **BY USER ROLE**

### **Students:**
- **Pop-ups:** Tier approved, certificate issued, urgent messages, trial expiring
- **Email:** All confirmations, approvals, messages
- **In-app:** Everything

### **Teachers:**
- **Pop-ups:** Urgent student messages, admin requests, system alerts
- **Email:** Student messages, admin communications
- **In-app:** Everything

### **Admin:**
- **Pop-ups:** New requests, urgent alerts, system errors
- **Email:** All requests, important updates
- **In-app:** Everything

### **NHS Coordinators:**
- **Pop-ups:** RTT breaches, 2WW referrals, critical alerts
- **Email:** All clinical events, breach warnings
- **In-app:** Everything

---

## ðŸ”§ **IMPLEMENTATION CODE**

### **How to Use in Your Code:**

```python
from notification_system import create_notification, NotificationType, NotificationPriority

# EXAMPLE 1: RTT Breach (CRITICAL)
create_notification(
    user_email="coordinator@nhs.uk",
    title="ðŸš¨ RTT BREACH ALERT!",
    message=f"Patient {name} - {days} days to breach",
    notification_type=NotificationType.URGENT,
    priority=NotificationPriority.URGENT,  # This triggers pop-up!
    send_email=True,
    action_url="/ptl"
)

# EXAMPLE 2: Appointment Booked (MEDIUM)
create_notification(
    user_email="patient@example.com",
    title="âœ… Appointment Confirmed",
    message=f"Your appointment is on {date}",
    notification_type=NotificationType.SUCCESS,
    priority=NotificationPriority.MEDIUM,  # No pop-up
    send_email=True,
    action_url="/appointments"
)

# EXAMPLE 3: Tier Approved (HIGH - Good news!)
create_notification(
    user_email="student@example.com",
    title="ðŸŽ‰ Tier Upgrade Approved!",
    message="You now have access to Tier 2",
    notification_type=NotificationType.SUCCESS,
    priority=NotificationPriority.HIGH,  # Triggers green pop-up!
    send_email=True,
    action_url="/my-account"
)

# EXAMPLE 4: Clinical Letter Generated (LOW)
create_notification(
    user_email="staff@nhs.uk",
    title="ðŸ“ Clinical Letter Generated",
    message=f"Letter for {patient} is ready",
    notification_type=NotificationType.INFO,
    priority=NotificationPriority.LOW,  # No pop-up, no email
    send_email=False,
    action_url="/letters"
)
```

---

## âœ… **QUICK REFERENCE CARD**

### **When in Doubt:**

**Use Pop-Up if:**
- âœ… Deadline <14 days
- âœ… Security issue
- âœ… Good news to celebrate
- âœ… Requires immediate action

**Use Email if:**
- âœ… Patient communication
- âœ… Confirmation needed
- âœ… Account/payment related
- âœ… User expects it

**Use In-App:**
- âœ… ALWAYS (for everything!)

---

## ðŸŽ¯ **YOUR PLATFORM AUTO-DECIDES!**

The notification system I built **automatically** decides based on priority:

```python
# In notification_ui.py
def check_and_show_new_notifications():
    for notif in unread_notifs:
        if notif.priority >= 3:  # High or Urgent
            show_popup_notification(notif)  # AUTO POP-UP!
```

**You don't have to decide each time - the system does it!**

---

## ðŸ’¡ **BEST PRACTICES**

1. **Don't Overwhelm Users**
   - Max 3 pop-ups per session
   - Group similar notifications
   - Use badges for counts

2. **Respect User Preferences**
   - Let users disable emails
   - Let users set quiet hours
   - But keep critical alerts

3. **Be Clear & Actionable**
   - Pop-up should have clear action
   - Email should have next steps
   - In-app should link to details

4. **Test Everything**
   - Test with different priorities
   - Test email delivery
   - Test pop-up timing

---

**The system I built handles all of this automatically based on priority levels!** ðŸŽ‰

---

*Notification Decision Matrix v1.0*  
*Created: 16 October 2025*  
*Status: Production Ready*
